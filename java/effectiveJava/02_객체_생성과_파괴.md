# 02. 객체 생성과 파괴
#TIL/java/effectiveJava

---

## 아이템 1. 생성자 대신 정적 팩터리 메서드를 고려하라

정적 팩터리 메서드의 장점은 다음과 같다.  

- 이름을 가질 수 있다.
	- 단순히 public 생성자로 생성하는 방법에 비해 구체적인 의미를 부여해줄 수 있다.
	- 한 클래스에 메소드 시그니처 타입이 같거나 유사한 경우가 존재한다면 정적 팩터리 메서드를 고려하자.
- 호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.
	- `인스턴스 통제 클래스`라고 한다.
		- 싱글턴 가능, 인스턴스화 불가로 만들 수 있음, 불변 값 클래스에서 동치인 인스턴스가 1개뿐임을 보장할 수 있음
	- 불변 클래스는 인스턴스를 미리 만들어 놓거나 새로 생성한 인스턴스를 캐싱하여 재활용하는 식으로 불필요한 객체 생성을 피할 수 있다.
- 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.
	- API를 만들 때 이 유연성을 이용하면 구현체를 공개하지 않아도 해당 객체를 반환할 수 있다.
	- 사용하는 프로그래머 입장에서는 적은 수의 API만 습득해도 되고, 구현체를 알 필요가 없다.
- 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.
	- 위와 마찬가지로 반환 타입의 하위 타입이면 어떤 구현체든지 반환할 수 있다.
- 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.
	- 위와 마찬가지로 인터페이스를 구현하는 구현체가 나중에 사용자의 등록으로 생성되는 클래스일 경우 (프레임워크 입장에서), 해당 코드를 작성하는 당시에는 구현체를 몰라도 가능하다.

단점은 다음과 같다.  

- 상속을 하려면 public이나 protected 생성자가 필요하기 때문에 정적 팩토리 메서드만으로는 하위 클래스를 만들 수 없다.
	- 하지만 상속보다 컴포지션을 사용하도록 유도하고, 불변 타입으로 만들려면 이 제약을 지켜야 한다는 점에서 장점으로 볼 수도 있다.
- 정적 팩터리 메서드는 프로그래머가 찾기 어렵다.  
	- 관용적인 메서드명은 아래에 정리했다.

관용적인 정적 팩토리 메서드명은 다음과 같다.  

- from
	- 매개변수를 하나 받은 형변환 메서드
- of
	- 여러 매개변수를 받는 집계 메서드
- valueOf
	- from과 of의 더 자세한 버전
- instance, getInstance
	- 매개변수로 명시한 인스턴스를 반환하지만, 같은 인스턴스임을 보장하지는 않는다.
- create, newInstance
	- 매번 새로운 인스턴스를 생성함을 보장한다.
- getType
	- 생성할 클래스가 아닌 다른 클래스에 팩터리 메서드를 정의할 때 쓴다.
	- `FileStore fs = Files.getFileStore(path);`
- newType
	- 생성할 클래스가 아닌 다른 클래스에 팩터리 메서드를 정의할 때 쓴다. (매번 새로운 인스턴스임을 보장)  
	- `BufferedReader br = Files.newBufferedReader(path);`
- type
	- getType, newType의 간결한 버전






















