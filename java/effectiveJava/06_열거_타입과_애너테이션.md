## 아이템 34. int 상수 대신 열거 타입을 사용하라

정수 열거 패턴이나 문자열 열거 패턴에는 단점이 많다.  
타입 안전을 보장할 방법이 없으며 표현력도 좋지 않다.  
정수 열거 패턴은 평범한 상수를 나열한 것이라 컴파일하면 그 값이 클라이언트 파일에 그대로 새겨지고, 상수 값이 바뀌면 클라이언트도 반드시 다시 컴파일해야 한다.  

Java에서는 열거 패턴의 단점을 해결하면서 동시에 여러 장점을 주는 대안을 제시하는데, 바로 열거 타입(Enum Type)이다.  

열거 타입 자체는 클래스이며, 상수 하나당 자신의 인스턴스를 하나씩 만들어 public static final 필드로 공개한다.  
열거 타입은 밖에서 접근할 수 있는 생성자를 제공하지 않으므로, 클라이언트가 인스턴스를 직접 생성하거나 확장할 수 없어 이 인스턴스들은 딱 하나씩만 존재하게 된다.  
즉, 싱글턴을 확장해 더 일반화한 형태라고 볼 수 있다.  

열거 타입에는 다음과 같은 장점들이 있다.  

- 컴파일 타입 안정성을 제공한다.
- 각자의 이름 공간이 있어서 이름이 같은 상수도 공존할 수 있다.
- 임의의 메서드나 필드를 추가할 수 있고, 임의의 인터페이스를 구현하게 할 수도 있다.
    - 그저 상수 모음이지만, 실제로는 클래스이기 때문에 고차원의 추상 개념 하나를 완벽히 표현해낼 수도 있는 것이다.

열거 타입 상수 각각을 특정 데이터와 연결지으려면 생성자에서 데이터를 받아 인스턴스 필드에 저장하면 된다.  

더 나아가보면, 상수마다 동작이 달라져야 하는 상황도 있을 수 있다.  
이때는 열거 타입에 추상 메서드를 선언하고, 각 상수별 클래스 body에서 재정의하는 방법을 사용할 수도 있다.  
이를 상수별 메서드 구현이라 한다.  

단, 상수별 메서드 구현에는 열거 타입 상수끼리 코드를 공유하기 어렵다는 단점도 있는데, 이는 내부 Enum을 별도로 만들어, 상위 Enum에서 내부 Enum을 각자 상황에 맞게 참조하도록 하면 조금 복잡할지언정 안전하고 유연하게 설계할 수 있다.  

결론은, 필요한 원소를 컴파일타임에 다 알 수 있는 상수 집합이라면 항상 열거 타입을 사용하자는 것이다.  
열거 타입에 정의된 상수 개수가 영원히 고정 불변일 필요는 없다.  
열거 타입은 나중에 사웃가 추가돼도 바이너리 수준에서 호환되도록 설계되었기 때문이다.
