## 아이템 15. 클래스와 멤버의 접근 권한을 최소화하라

어설프게 설계된 컴포넌트와 잘 설계된 컴포넌트의 가장 큰 차이는 클래스 내부 데이터와 내부 구현 정보를 외부 컴포넌트로부터 얼마나 잘 숨겼느냐다.  
잘 설계된 컴포넌트는 구현과 API를 말끔히 분리하고, 오직 API를 통해서만 다른 컴포넌트와 소통하며 내부 동작 방식에는 전혀 개의치 않는다.  

`캡슐화` 는 컴포넌트들을 서로 독립시켜서 개발, 테스트, 최적화, 적용, 분석, 수정을 개별적으로 할 수 있게 한다.  

- 여러 컴포넌트를 병렬로 개발할 수 있기 때문에 개발 속도를 높일 수 있다.
- 각 컴포넌트를 더 빨리 파악하여 디버깅할 수 있고, 다른 컴포넌트로 교체하는 부담도 적기 때문에 관리 비용을 낮춘다.
- 컴포넌트가 독립적이어서 다른 컴포넌트에 영향을 주지 않고 해당 컴포넌트만 최적화할 수 있다.
- 소프트웨어 재사용성을 높인다.
- 개별 컴포넌트의 동작을 검증할 수 있기 때문에 큰 시스템을 제작하는 난이도를 낮춘다.

기본 원칙은, **모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다**는 점이다.  

멤버를 패키지 외부에서 쓸 이유가 없다면 package-private으로 선언하자.  
이러면 API가 아닌 내부 구현이 되어 다음 릴리즈와 관계없이 언제든 수정할 수 있다.  
공개 API는 하위 호환을 위해 영원히 관리해줘야만 한다.  
protected도 package-private에 비해 범위가 엄청 넓고, 이 또한 공개 API이기 때문에 영원히 관리해야 한다.  

멤버 접근성을 좁히지 못하게 방해하는 제약이 하나 있는데, 상위 클래스의 메서드를 재정의할 때 접근 수준을 상위 클래스에서보다 좁게 설정할 수 없다는 점이다.  
이는 상위 클래스의 인스턴스는 하위 클래스의 인스턴스로 대체해서 사용할 수 있어야 한다는 원칙(LSP, 리스코프 치환 원칙)을 지키기 위해서 필요하다.  

코드를 테스트하려는 목적으로 접근 범위를 넓히려 할 때가 있는데, 적당한 수준까지는 괜찮다.  
public 클래스의 private 멤버를 package-private 까지 풀어주는 것은 허용할 수 있지만, 그 이상은 안 된다.  

public 클래스의 인스턴스 필드는 되도록 public이 아니어야 한다.  
필드가 가변 객체를 참조하거나, final이 아닌 경우 불변식을 보장할 수 없고, 필드가 수정될 때 (락 획득 같은) 다른 작업을 할 수 없게 되므로 Thread-Safe 하지 않게 된다.  

해당 클래스가 표현하는 추상 개념을 완성하는 데 필요한 상수라면 public static final 필드로 공개해도 좋다.  

클래스에서 public static final 배열 필드를 두거나 이 필드를 반환하는 접근자 메서드를 제공해서는 안 된다.  
외부에서 해당 내용을 수정할 수 있기 때문이다.  
대신 반환 시 public 불변 리스트로 반환해주거나, 방어적 복사를 활용해 반환해줄 수 있다.

## 아이템 16. public 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라

이따금 다음과 같이 필드만 모아놓는 퇴보한 클래스를 작성하려 할 때가 있다.  

```java
class Point {
    public double x;
    public double y;
}
```

이런 클래스는 데이터 필드에 직접 접근이 가능하니 캡슐화의 이점을 제공하지 못한다.  
그래서 객체지향 프로그래머는 모든 필드를 private으로 바꾸고 public 접근자(getter)를 추가한다.  

public 클래스에서라면 위 private 제어 방식이 확실히 맞다.  
패키지 바깥에서 접근할 수 있는 클래스라면 접근자를 제공함으로써 클래스 내부 표현 방식을 언제든 바꿀 수 있는 유연성을 얻을 수 있다.  
public 클래스가 필드를 공개하면 이를 사용하는 클라이언트가 생겨날 것이므로 내부 표현 방식을 마음대로 바꿀 수 없게 된다.  

하지만 **package-private 클래스 혹은 private 중첩 클래스라면 데이터 필드를 노출한다 해도 하등의 문제가 없다.**  
해당 클래스가 표현하고자 하는 추상 개념만 올바르게 표현해주면 된다.
