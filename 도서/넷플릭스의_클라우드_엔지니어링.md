# 넷플릭스의 클라우드 엔지니어링
#TIL/도서

---

## 넷플릭스

### 넷플릭스 소개

대부분의 기업은 고객을 `락인(Lock In)`하는 형태로 점유하려고 한다.  
장기 계약을 맺고, 그 계약을 파기하면 손해를 입히는 방식으로 사업을 진행한다.  

넷플릭스는 오히려 언제든 탈퇴할 수 있으므로 콘텐츠의 품질과 서비스의 품질을 남들보다 훌륭하게 확보하는 것이 집중한다.  
이것이 넷플릭스 사업 방향의 힘이다.  

넷플릭스의 사업을 뒷받침하기 위해서는 다음과 같은 것들이 필요하다.  

- 인터넷 스트리밍 기술
- 결제 시스템

플랫폼, 컨테이너, 도커 같은 세부 기술들은 중요하지만, 결국 서비스를 더 자주 업데이트하고 더 적게 중지하도록 하는 데 아주 미시적인 효과만을 제공할 뿐이다.  
더 중요한 것은 '기술의 모음이 어떤 사업의 영역 또는 기능을 위해 구현되었는가'하는 부분이다.  

이 책에서 알아볼 내용은 다음과 같다.  

- 애플리케이션을 클라우드에 최적화해서 좋은 것은 무엇인가
- 넷플릭스는 이를 이루기 위해 도대체 어떻게 일을 하고, 그 일의 결과물로 어떤 도구들을 만들어 놓았는가

기술은 사업을 위해 존재한다.  
넷플릭스의 모든 도구는 영상 콘텐츠를 다운타임 없이 사용자에게 최고의 속도로 공급하기 위해 존재한다.  

`자유와 책임`이 넷플릭스의 문화를 가장 잘 설명한다.  
만들었으면 직접 구동하고, 다른 사람에게 필요하면 지원하라는 컨셉이 넷플릭스를 잘 나타내준다.  


### 데브옵스와 클라우드

- `devOps`
	- Andrew Clay Shafer : 이 단어의 창시자
	- 이 용어가 처음 나온 2011년 즈음에는 개발과 운영이 함께하는 조직, 그런 사상을 의미하는 단어였다.
	- 시대가 흐르면서 클라우드를 잘 아는 사람, 클라우드 인프라를 잘 이해하고 있는 개발자로 확장
		- 인프라에 대한 지식 요구도 상승

많은 기업들이 1980~2000년대 검증된 기술과 모델을 바탕으로 고착화된 모습을 보이고 있다.  

- `제로다운타임`
	- 잦은 업데이트를 하면서도 다운타임이 없는, 서비스 중단이 없는 서비스가 현재 요구되는 중요한 서비스 덕목


### 넷플릭스, 아마존이 다른 이유

- 아마존에는 `why@`라는 그룹메일 계정이 있다.
	- 본인이 야기한 실수나 목격한 실수를 털어놓으면, 문제가 왜 생겼고 효과적인 해결책이 무엇인지 이야기하는 공식적인 채널
	- 실수 공개 -> 해결책 논의 -> 개선 -> 이후 발생할 수 있는 문제 방지
	- 본인의 실수를 공개해 더 큰 손해를 막은 직원은 포상

수많은 `왜`를 통해 강화된 다운되지 않는 서비스는 고객에게 언제나 동작한다는 신뢰를 얻는다.  
그리고 이러한 방식의 지속적인 서비스 개선은 위험을 감소시키는 동시에 고객이 원하는 방향으로의 서비스 개선을 유도한다.  

강력한 실패 테스트와 이 테스트를 견디는 서비스 구조를 제품에 반영하는 것이 핵심이다.  


### 넷플릭스에 대하여

- 전자상거래 형태로 사업을 시작
	- 우편으로 영상을 주고 받음
- 기술의 발전에 따라 영상 스트리밍 업체로 사업 전환 (쉬운 일이 아니다)
- 한국의 케이블TV, 방송국의 특수한 상황 때문에 넷플릭스의 한국 진출이 쉽지 않을 것이라 예상했지만, 저렴한 가격에 다양한 콘텐츠를 제공하는 넷플릭스
- 기존의 틀과 다르게 한번에 드라마의 전 시즌을 공개하는 방식


## 클라우드가 가져온 변화

### 모바일의 발전이 가져온 효과

최근 10여년 간 IT 산업에서의 가장 큰 변화는 `클라우드`이다.  
이 변화의 중심에는 다음과 같은 특징이 있다.  

- 클라우드는 그냥 발전한 것이 아니라 폭발적으로 증가한 클라이언트(단말의 종류와 수)와 함께 이루어진 것이다.
	- 모든 이가 콘텐츠의 생산자이자, 소비자가 될 수 있는 변화
- 클라우드가 기술적으로 홀로 발전한 것은 아니다.
	- 린(Lean), 애자일(Agile), CI/CD, MSA, DevOps, 클라우드 네이티브, 컨테이너, TDD, BDD
	- 클라우드가 어려운 이유 중 하나는, 이를 잘 사용하기 위해서 수없이 등장한 새로운 것들에 대한 이해가 동반되어야 하기 때문
- 클라우드와 함께 떠오른 수많은 기술을 구현하기 위한 도구들의 등장
	- AWS, 구글 클라우드, MS 애저와 같은 빅 3사만 해도 수많은 서비스를 제공한다.
	- '러닝 커브'가 매우 높아졌으며, '모든 이가 모든 것을 배워야 하는' 상태에 이르렀다.
- 클라우드 기반의 서비스를 잘 하는 회사들은 모두 '어딘가 조금 다른' 조직의 문화나 구성을 포함하고 있다.
	- 정량적, 정성적 조직 효율성에 익숙한 조직들은 '검증되었다'는 슬로건 아래 '새로운 방법의 사용'을 제한한다.
	- 새로운 조직과 문화, 종전과 상이한 업무 규칙은 클라우드의 사용을 어렵게 하는 점 중 하나
- 위에 소개된 것들을 적용하는 과정에 다른 시각이 필요하다.
	- 한 순간에 모든 것을 원하는대로 바꿀 수 없다.
	- 대신 점진적으로 효과를 확인하고 피드백을 받으며 변화를 적용하는 방법이 옳은 접근이다.


### 다양한 기술의 조합

`애자일`은 이전의 '워터폴' 방식과는 대비되는 업무 프로세스이다.  

> Plan > Design > Test > Build > Accept > Deploy 과정의 반복

여기서 주목해야 하는 것은 바로 '배포(Deploy)'이다.  
소프트웨어가 주류이던 시절과 달리, 실제 서비스로의 적용을 의미하는 '배포'가 이 과정에 포함되어 있다는 것은 특별한 의미를 포함한다.  
`애자일`이 단순히 '소프트웨어 개발 방법론'을 의미하는 것이 아니라 클라우드와 함께 개발된 소프트웨어를 서비스에 반영하는 과정을 포함한다는 의미이다.  
또한, 배포의 과정 이후 플랜 단계에서 이전 배포에 대한 피드백이 매우 중요한 부분이 되었다.  

다음 내용은 애자일이 어째서 중요한가에 대한 정리이다.  

- 뛰어난 투명성
	- 팀 내의 서로 다른 역할을 가진 이들이 '현재' 일하고 있는 내용에 대해 공유하고, 무엇이 진행되어야 하는지에 대해 이해하고 있기 때문
- 뛰어난 예측성
	- 자주 배포를 수행하기 때문에 서비스의 기능 개선이나 배포에 대한 예측이 수월해진다.
- 뛰어난 유연성
	- 기능 개발의 우선순위에 대한 변경이 필요할 때, 즉시 반영할 수 있다.
- 사업적 가치에 집중
	- 개발 우선순위를 명확하게 확인할 수 있으므로, 사업 의사 결정권자는 서비스의 사업적 행보에 집중할 수 있다.
- 사용자에 집중
	- 디자이너나 개발자가 개발하는 기능이 항상 '사용자 입장'에서 고려되므로 사용되지 않는 가치 없는 작업이 될 가능성을 줄인다.
- 품질에 집중
	- 잘게 쪼개어서 배포함으로써 '사용자가 원하는 방향'으로 서비스를 개선하고, 더 자주 리뷰를 수행하므로 서비스 품질이 더 자주 개선된다.

이러한 애자일에 관심이 있다면, 다음과 같은 사항을 고려해야 한다.  

- 팀 구성원들의 의지
	- 애자일을 책으로 배우기 쉽지 않은 경우는 이 방법이 구성원 간 매우 활발한 소통을 통해서 이루어지는 프로세스이기 때문
- 스스로 진행하려고 하는 경우
	- 하지마라. 단시간에 홀로 이룰 수 있는 것이 아님.
- 새로운 프로세스와 도구를 사용할 준비가 되었는가
	- 현재 사용하는 도구가 애자일을 지원하는지.
	- 팀 구성원들이 TDD, CI/CD와 같은 방법과 도구를 사용할 준비가 되었는지.
	- 애자일은 지금 당장 시작할 수 있지만, '잘' 수행하기까지는 시간이 필요하다.

이 모든 것들의 바탕에는 '변화'를 받아들일 준비가 되었는지의 여부가 매우 중요하다.  
변화를 받아들일 준비가 되어 있지 않다면, 애자일은 그저 불필요한 추가 업무가 될 것이다.  











































