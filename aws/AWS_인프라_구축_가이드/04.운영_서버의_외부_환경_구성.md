# 4. 운영 서버의 외부 환경 구성
#TIL/aws

---

## DNS (Domain Name System

- DNS 서버 : 도메인과 그 도메인에 연결된 IP 주소들을 관리하는 서버

## SSL/TLS, HTTPS

- HTTPS는 HTTP 프로토콜에 SSL/TLS 암호화 프로토콜을 이용해 전송되는 데이터를 암호화하는 과정을 추가한 것

### HTTPS의 특징

1. 기밀성 : 중간에 내용을 가로채도 내용을 읽지 못하게
2. 무결성 : 내용 변조를 못하게
3. 인증 : 클라이언트가 통신하고 있는 서버의 신원 확인

### HTTPS 동작 방식

1. 서버 관리자가 인증서 발급 기관을 통해 서비스하는 도메인에 대한 `인증서`를 발급받는다.
2. 발급받은 인증서를 클라이언트와 통신하는 서버 인스턴스의 웹 서버에 설치한다.
3. 클라이언트는 요청 시 SSL/TLS로 암호화한 통신을 하고 싶다고 요청하면서 사용가능한 SSL/TLS 버전 목록과 암호화 알고리즘을 전달한다.
4. 서버는 클라이언트가 전달한 SSL/TLS 버전과 알고리즘을 고르고 서버에 설치된 인증서를 함께 전달한다. 인증서는 `공개 암호화 키`를 포함하고 있다.
5. 클라이언트는 서버의 인증서가 신뢰할 수 있는 곳으로부터 서명된 것인지 확인하고 대칭 암호화 키로 사용할 키를 생성해서 서버에서 받은 공개키로 암호화해 전달한다.
6. 서버와 클라이언트는 이 대칭 암호화키를 사용해 암복화를 테스트하고, 테스트 후에는 이 키를 이용해 데이터를 암호화해서 전달한다.

### SSL/TLS 인증서의 가격

인증서는 무료도 있고, 연간 백만 원 이상의 것도 있다. 다음 기준에 따라 달라진다.  

- 발급자 신원에 대해 얼마나 많은 검증을 거치는지
- 얼마나 많은 인증 기관에서 신뢰하고 있는지
- 몇 개의 도메인에서 사용 가능한지
- 인증서 발급 기관이 얼마나 저명한 곳인지

### SSL/TLS 인증서 설치

SSL/TLS 인증서는 HTTPS 통신을 위한 것이기 때문에 클라이언트와 직접 통신하는 서버에 설치되어 있어야 한다.  

따라서 로드 밸런서 역할을 하는 서버 인스턴스 웹 서버에 인증서를 설치해야 한다.  

AWS에서는 AWS 콘솔에서 간편하게 로드 밸런서에 인증서를 추가할 수 있다.  

#### [실습] AWS Certificate Manager를 통한 SSL/TLS 인증서 등록

Certificate Manager로 인증서를 발급받은 후 [로드밸런서] - [리스너] 탭에서 HTTPS 리스너를 추가한다.  

추가 시 SSL 인증서에 발급받은 인증서를 추가한다.  

