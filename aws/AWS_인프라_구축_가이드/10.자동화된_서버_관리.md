# 10. 자동화된 서버 관리
## AWS Elastic Beanstalk

Elastic Beanstalk는 IaaS(Infrastructure as a Service)인 EC2와 다르게 PaaS(Platform as a Service)로서 서버 구성, Auto Scaling, 배포 자동화, 모니터링 등 서버 운영에 필요한 대부분의 작업을 최대한 자동화해서 제공하는 서비스다.  

### 장점 

- 빠르게 서버 환경을 구축할 수 있다. 서버 운영에 대한 지식이 없어도 완성도 높은 서버 환경이 구축된다.  
- 인프라에 신경을 덜 쓸 수 있어서 개발에 더욱 집중할 수 있다.
- Docker, 사용자 지정 플랫폼, 사용자 지정 이미지 등의 기능도 사용할 수 있다.  


### 단점

- Elastic Beanstalk에서 제공하는 틀을 벗어난 세부 설정에 대한 유연성이 떨어진다.
- `.ebextensions`, 사용자 지정 플랫폼, 사용자 지정 이미지 등으로 환경을 수정할 수 있지만 수정이 어려운 편이다. 많이 수정하면 환경 자동화의 장점도 퇴색된다.  
- 자동화가 많이 돼 있다는 것은 버그 발생 시 원인을 찾기 더 어려울 수도 있다는 뜻이다.
- 환경 구성의 업데이트가 자주 일어나는데 정확한 내역을 알 수 없다.
- 자원들을 생성할 때 이름도 자동 생성하는데, 기존 자원의 이름 규칙과 맞지 않을 수 있다.  


### 웹 애플리케이션 환경, 작업자 환경

Elastic Beanstalk는 일반적인 웹 애플리케이션 환경 외에도 작업자 환경을 제공한다.  

애플리케이션에서는 웹 요청을 받아서 비동기로 처리해야 할 경우가 상당히 많은데, 작업자 환경은 이 비동기 작업 방식을 구현할 수 있게 해준다.  

작업자 환경을 구성하기 위해서는 AWS SQS(Simple Queue Service)도 함께 사용해야 한다.  
SQS는 메시지 대기열 서비스로 한 서비스에서 다른 서비스로 메시지를 넘길 때 자주 사용된다.  

1. 오래 걸리는 작업을 실행시키기 위한 (비동기로 처리해야 하는 작업) 요청 정보를 Elastic Beanstalk와 연동된 SQS 큐에 추가한다.
2. Elastic Beanstalk의 작업자 환경으로 실행된 EC2 내 설치돼 있는 SQS 데몬 (sqsd)이 SQS 큐에서 메시지를 하나씩 빼 온다.
3. 같은 인스턴스에 실행되고 있는 사용자의 Elastic Beanstalk 애플리케이션에 HTTP 요청을 이용해 메시지를 전달한다.

