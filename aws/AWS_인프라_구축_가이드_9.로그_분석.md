# 9. 로그 분석

로그는 그 당시 어떤 일이 일어났는지 확인할 수 있게 해주는 중요한 단서이다.  

Auto Scaling을 이용하면 EC2 인스턴스는 하루에도 수없이 많이 실행되고 종료된다.  

다중 서버 환경에서 EC2 인스턴스는 연산만 처리하는 컴퓨팅 유닛으로 생각해야 하기 때문에, 인스턴스가 종료되기 전에 보존해야 하는 파일들은 외부에서 관리해야 한다.  


## AWS CloudWatch Logs

8장 CloudWatch의 기능 중 로그를 관리하는 기능이다.  CloudWatch Agent가 로그도 관리한다.  

CloudWatch Logs 의 항목은 다음과 같다.  

- 로그 이벤트 : 로그를 기록하는 애플리케이션이나 자원에서 로그를 기록한 줄의 모음. 독립적인 이벤트로 볼 수 있는 로그 줄의 묶음.
	- 애플리케이션 서버 로그에서 클라이언트 요청의 시작부터 응답을 줄 때까지 쌓인 여러 줄의 로그를 하나의 이벤트로 볼 수 있다. 
- 로그 스트림 : 동일한 소스에서 기록된 로그 이벤트들을 시간순으로 모아둔 스트림.
- 로그 그룹 : 여러 로그 스트림을 하나로 모아둔 곳.

#### [실습] CloudWatch Logs에 로그 적재


## Elastic Stack

Elastic Stack은 Elastic 사에서 제공하는 오픈소스 제품들의 모음으로 가장 많이 사용되고 있는 로그 관리 도구 중 하나이다.  

Elastic Stack은 네 개의 제품으로 구성돼 있다.  

- Beats : 다양한 종류의 데이터를 Logstash와 Elasticsearch로 안전하고 효율적으로 보낼 수 있게 해주는 데이터 수집기
- Logstash : 데이터 처리 파이프라인. Beats에서 전송한 데이터를 Elasticsearch로 전송하기 전에 가공하는 역할.
- Elasticsearch : Logstash나 Beats에게 받은 데이터를 저장하고 인덱싱해서 쿼리로 정형 및 비정형 데이터, 위치 정보, 메트릭 등의 다양한 유형의 데이터를 검색할 수 있게 해주며, RESTful API를 이용해 외부에서 쿼리를 날릴 수 있도록 제공한다.
- Kibana : Elasticsearch에 저장돼 있는 데이터를 조회해서 화면에 시각화하는 역할을 한다.  

#### [실습] Elastic Stack 구축
