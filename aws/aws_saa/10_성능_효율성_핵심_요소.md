# 10. 성능 효율성 핵심 요소
#TIL/aws/SAA

---

## 핵심 AWS 서비스의 성능 최적화

### 컴퓨팅

'컴퓨팅' 서비스의 궁극적인 목표는 워크로드 요구에 맞춰서 몇 가지 컴퓨팅 리소스를 신속하고 효율적으로 적용하는 것이다.  

- EC2 인스턴스 유형
	- 배포할 리소스를 구성할 때 워크로드를 예상하고 그것에 가장 근접한 인스턴스 유형을 선택해야 하며, 필요에 따라 실행 중인 인스턴스의 유형을 변경하거나 같은 유형의 인스턴스를 추가로 배포할 수 있다.
- Auto Scaling
	- EC2 인스턴스 하나로 필요한 성능을 얻을 수 없다면 Scale Out을 고려하자.
	- 수평 확장은 인스턴스를 병렬로 배치해서 워크로드를 처리하다가 애플리케이션 요청이 늘어나면 인스턴스를 추가해서 새 요청을 지원하는 것이다.
	- Auto Scaling은 변화하는 수요에 대응하기 위해 인스턴스를 자동으로 시작하거나 종료하도록 구성할 수 있는 AWS 도구다.
- 서버리스 워크로드
	- Docker와 같은 컨테이너 도구나 Lambda와 같은 코드 전용 함수를 사용하면 서버를 계속 가동하는 것보다 훨씬 적은 오버헤드로 초경량의 즉시 가동 가능한 컴퓨팅 기능을 사용할 수 있다.
	- Amazon ECS(Elastic Container Service)와 같은 컨테이너 관리 도구와 ECS의 프론트엔드 추상화 도구인 AWS Fargate는 빠르게 처리해야 하는 여러 워크로드를 모아 하나의 인스턴스가 처리하도록 해서 리소스 사용률을 극대화한다.


### 스토리지

- RAID 최적화 EBS 볼륨
	- RAID(Redundant Array of Independent Disks)는 데이터 센터 관리자들이 지난 수년간 수행해왔던 중요한 작업으로, 디스크 저장 데이터의 성능 을 최적화하고 안정성을 향상시킬 수 있으며, AWS 클라우드에서도 EBS 디스크에 RAID를 적용함으로써 효율성을 높일 수 있다.
	- RAID는 여러 드라이브를 논리 드라이브 하나로 결합한 뒤 데이터를 전체 디스크에 분산하거나 복제해서 저장한다.
	- RAID 0
		- 데이터를 쪼개서 여러 장치에 나눠 저장하는 데이터 스트라이핑 방식을 취한다.
		- 단일 디스크의 액세스 제한을 넘는 동시 작업에 유용하다.
		- 트랜잭션 집중 작업을 위해 I/O 성능을 크게 높일 수 있지만, 내구성이 높아지지는 않는다.
	- RAID 1
		- 데이터를 여러 볼륨에 복제한다.
		- 스트라이핑이나 패리티를 사용하지 않기 때문에 성능 향상에 보탬이 되지는 않지만, 단일 볼륨에 장애가 생겨도 치명적이지 않기 때문에 데이터의 안정성을 높일 수 있다.
		- 성능을 높일 필요는 없으나 데이터 내구성이 중요한 시나리오에 사용한다.
	- RAID 5, RAID 6
		- 성능과 안정성 모두 확보할 수 있지만, IOPS 성능이 낭비되므로 AWS에서는 권장하지 않는다.
	- 크기와 IOPS 설정이 같은 EBS 볼륨을 2개 이상 만들어 인스턴스에 연결해야 RAID를 설정할 수 있다.
- S3 리전 간 복제
	- S3는 글로벌 서비스지만, 버킷의 데이터는 AWS 리전 내에 물리적으로 존재해야 한다.
		- 새 버킷을 만들 때 리전을 선택해야 하는 이유가 바로 그 때문이다.
	- 데이터는 단일 리전에 저장돼 있지만 규정 준수, 성능상의 이유로 데이터를 여러 장소에 저장해야 할 필요가 있으며, 여러 지역에 퍼져 있는 클라이언트의 응답 지연 시간을 최소화하거나 신뢰성과 내구성 증대를 위해 데이터를 복제하기도 한다.
	- S3 리전 간 복제를 구성하면 한 리전의 버킷에 있는 콘텐츠를 보조 리전의 버킷과 자동으로 동기화하며, 복제 규칙을 만들어 원본 버킷에서 콘텐츠를 복제하도록 CRR을 설정한다.
- Amazon S3 Transfer Acceleration
	- 큰 용량의 파일을 로컬 컴퓨터와 S3 버킷 간에 빠르게 전송할 수 있는 방법이다.
	- 전송 비용이 추가되지만, CloudFront 엣지 로케이션을 거치기 때문에 전송 속도를 상당히 높일 수 있다.
- CloudFront와 S3 원본
	- S3는 정적 웹사이트 호스팅 외에도 파일, 미디어 객체, 리소스, 데이터 등을 폭넓게 호스팅하는 데에도 훌륭한 플랫폼이며, 저장된 객체에 액세스할 때 CloudFront를 사용할 수 있다.


### Database

데이터 관리 환경을 설계할 때 몇 가지 중요한 결정을 내려야 하며, EC2 인스턴스에 자체 플랫폼을 구축하는 것이 나은지, Amazon RDS를 선택해서 중요 인프라를 AWS에 올리는 것이 나은지 등에 대해 결정을 내려야 한다.  

직접 관리하면 비용도 적게 들고 제어와 사용자 설정의 폭도 넓을 수 있지만 완전 관리형 서비스인 RDS를 사용하면 소프트웨어 업데이트, 패치, 복제, 네트워크 액세스와 같은 복잡한 관리 문제에서 벗어날 수 있으며 다음 기본 구성만 선택하면 된다.  

- RDS 인스턴스 유형 선택 (필수)
- 스키마, 인덱스, 뷰를 지능적으로 설계해서 데이터베이스 최적화 (필수)
- 옵션 그룹을 구성해서 RDS 인스턴스에 적용할 데이터베이스 기능 정의 (선택)
- 파라미터 그룹을 구성으로 미세 조정된 데이터베이스 동작 제어를 정의해서 RDS 인스턴스에 적용 (선택)

데이터웨어 하우스 도구로 AWS Redshift만 사용할 수 있는 것은 아니며, 확장성이 높은 SQL 작업을 위해 타사 데이터 관리 도구를 AWS에 배포하고 다양하게 통합하는 것이 일반적이다.  

- Pivotal Greenplum Database
	- 빅데이터 분석과 데이터 과학을 위한 대규모 병렬 데이터웨어하우스
	- AWS Marketplace에서 AMI로 제공
- Snowflake
	- 클라우드 환경을 위해 설계된 페타바이트 규모의 SaaS 데이터웨어하우스
	- AWS Marketplace에서 제공
- Presto
	- 반구조화된 데이터 분석을 위한 분산 Hadoop 기반 SQL 쿼리 엔진
	- Amazon Athena나 Amazon EMR을 통해 배포


### 네트워크 최적화와 로드 밸런싱







































