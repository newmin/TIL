# 02. Amazon Elastic Compute Cloud와 Amazon Elastic Block Store
#TIL/aws/SAA

---

## EC2 인스턴스

EC2는 물리 서버의 기능을 가상화했지만 실제 서버와 유사하게 작동하며, 스토리지, 메모리, 네트워크 인터페이스, OS가 새로 설치된 기본 드라이브가 제공된다.  

### EC2 AMI

AMI(Amazon Machine Image)에는 다음과 같이 4가지 종류가 있다.  

- Amazon 빠른 시작 AMI
	- 다양한 리눅스 배포판, Windows Server OS, 딥러닝, 데이터베이스 등의 공통 작업을 위한 특수 이미지가 포함된다.
	- 가장 많이 사용하고 Amazon에서 항상 최신버전으로 공식 지원한다.
- AWS Marketplace AMI
	- 프로덕션 환경에서 사용 가능한 공식 이미지
- 커뮤니티 AMI
	- 특정한 요구에 맞도록 독립 공급업체가 제작하고 관리한다.
- 프라이빗 AMI
	- 사용자가 자체 배포한 인스턴스에서 이미지를 생성해서 저장하면 자체 프라이빗 AMI를 만들 수 있다.  

일부 AMI는 특정 리전에서 사용할 수 없으므로 배포 시에 이를 고려해야 한다.  


### 인스턴스 유형

애플리케이션에 딱 맞는 컴퓨팅 성능, 메모리, 스토리지 용량을 제공해 필요한 사양에 맞게 비용을 지출할 수 있도록 한다.  

- 범용
	- T3, T2, M5, M4
	- 컴퓨팅, 메모리, 네트워크 리소스를 균형있게 제공한다.
	- M5, M4는 주로 중소 규모 데이터 운영에 권장된다. EBS 가상 볼륨을 스토리지로 사용해야 하는 T2와는 달리 일부 M 인스턴스는 실제 호스트 서버에 물리적으로 연결된 내장 인스턴스 스토리지 드라이브와 함께 제공된다.
- 컴퓨팅 최적화
	- C5, C4
	- 대규모 요청을 받는 웹 서버와 고성능 머신 러닝 워크로드에 사용한다.
- 메모리 최적화
	- X1e, X1, R5, R4, z1d
	- 처리량이 많은 데이터베이스, 데이터 분석, 캐싱 작업에 유용하다.
- 가속화된 컴퓨팅
	- P3, P2, G3, F1
	- 고성능 범용 그래픽 처리 장치(GPGPU)가 제공된다.
	- 3D 시각화/렌더링, 재무 분석, 전산 유체 역학 등의 높은 워크로드에 사용된다.
- 스토리지 최적화
	- H1, I3, D2
	- 지연 시간이 짧은 대용량 인스턴스 스토리지 볼륨을 사용한다.
	- 분산 파일 시스템과 규모가 큰 데이터 처리 애플리케이션에 유용하다.


### 인스턴스 환경 구성

- AWS 리전
	- EC2 리소스는 사용자가 선택한 리전에서만 관리할 수 있다.
- VPC (Virtual Private Cloud)
	- VPC를 사용하면 인스턴스를 다른 인스턴스와 쉽게 분리해서 실행할 수 있고, 프로젝트 단위나 프로젝트 단계별로 VPC를 새로 만들어 사용할 수 있다.
- 테넌시
	- 기본 설정은 공유 테넌시이다. 여러 인스턴스가 한 물리 서버에서 동시에 가상 머신으로 실행된다.
	- 특별히 격리가 필요한 규제 사항이 있는 경우, 전용 인스턴스를 선택하면 전용 서버에서 인스턴스가 실행된다.
		- 전용 인스턴스 테넌시 : 계정 내 다른 인스턴스와 같은 물리 서버에 호스팅될 수 있다.
		- 전용 호스트 테넌시 : 완전히 격리된 환경


### 인스턴스 동작 구성

EC2에서는 인스턴스 구성 단계에서 사용자 데이터를 지정해 인스턴스가 부팅할 때 명령을 실행할 수 있게 하는데, 이를 `부트스트랩`이라고 한다.  
스크립트 파일을 작성해 콘솔에서 인스턴스를 시작할 때 인스턴스 세부 정보 구성에서 지정하거나 AWS CLI에서 user-data 값을 사용해 필요한 상태로 인스턴스를 구성할 수 있다.  



































